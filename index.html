<!doctype html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NARUKSHA - Women Safety Emergency</title>

    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#ff1744">
    <link rel="apple-touch-icon" href="./icon.png">

    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800;900&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // Firebase Storage has been completely removed
        const firebaseConfig = {
            apiKey: "AIzaSyALS4Vn_QVZ0j3GBlvoZasjNePN-sVSai0",
            authDomain: "naruksha-8a2e9.firebaseapp.com",
            projectId: "naruksha-8a2e9",
            messagingSenderId: "121830589916",
            appId: "1:121830589916:web:1439ebed32f31458d63b19"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.db = db;
        window.fbDoc = doc;
        window.fbSetDoc = setDoc;
        window.fbGetDoc = getDoc;
        window.fbCollection = collection;
        window.fbAddDoc = addDoc;
    </script>

    <style>
        * { font-family: 'Lexend', sans-serif; }
        body { background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0d1628 100%); box-sizing: border-box; }
        @keyframes danger-pulse { 0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3), inset 0 0 20px rgba(239, 68, 68, 0.1); } 50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.6), inset 0 0 30px rgba(239, 68, 68, 0.2); } }
        @keyframes gps-pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.8; } }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes recording-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .sos-danger { animation: danger-pulse 2s infinite; }
        .gps-ping { animation: gps-pulse 1.5s infinite; }
        .neural-grid { background-image: linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px); background-size: 50px 50px; }
        .cyber-border { border: 2px solid; border-image: linear-gradient(135deg, #ff1744, #ff6e40, #ff1744) 1; box-shadow: inset 0 0 20px rgba(255, 23, 68, 0.2), 0 0 20px rgba(255, 23, 68, 0.3); }
        .hologram { background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(236, 72, 153, 0.2)); backdrop-filter: blur(10px); border: 1px solid rgba(99, 102, 241, 0.3); }
        .slide-up { animation: slideUp 0.5s ease-out forwards; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(99, 102, 241, 0.05); }
        ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #ff1744, #ff6e40); border-radius: 4px; }
    </style>
</head>

<body class="h-full">
    <div id="app" class="h-full w-full text-white overflow-auto relative neural-grid">
        <div class="fixed inset-0 pointer-events-none">
            <div class="absolute top-10 left-1/4 w-72 h-72 bg-red-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
            <div class="absolute top-40 right-1/4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
            <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
        </div>

        <div class="min-h-full w-full flex flex-col relative z-10">
            <header class="p-6 border-b-2 border-red-500/30 hologram">
                <div class="max-w-6xl mx-auto flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <div class="absolute inset-0 rounded-lg bg-gradient-to-r from-red-600 to-pink-600 blur-xl opacity-50"></div>
                            <div class="relative w-12 h-12 rounded-lg bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center">
                                <svg class="w-7 h-7 drop-shadow-lg" fill="currentColor" viewbox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.5 17a4.5 4.5 0 01-1.44-8.765 4.5 4.5 0 018.752.75c.133.056.26.119.38.187a4.5 4.5 0 01-.88 8.828H5.5z" clip-rule="evenodd" />
                                </svg>
                            </div>
                        </div>
                        <div>
                            <h1 id="app-title" class="text-2xl font-black bg-gradient-to-r from-red-400 via-pink-400 to-orange-400 bg-clip-text text-transparent tracking-wider">NAARI SURAKSHA</h1>
                            <p id="app-subtitle" class="text-xs text-cyan-400 tracking-widest font-mono">‚ö° SECURITY SYSTEM ACTIVE</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <button id="install-btn" class="hidden bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg shadow-green-500/30 hover:scale-105 transition-transform">üì≤ INSTALL APP</button>
                        <button id="cloud-settings-btn" class="p-1.5 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm border border-white/20 cursor-pointer">‚öôÔ∏è</button>
                        <select id="lang-selector" class="bg-black/40 border border-white/20 text-xs rounded-lg px-2 py-1.5 text-white outline-none cursor-pointer focus:border-red-500 transition-colors font-mono">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                            <option value="rj">‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§®‡•Ä (Rajasthani)</option>
                            <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                            <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                            <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                            <option value="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                            <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                        </select>
                        <div id="location-status" class="flex items-center gap-2 px-4 py-2 rounded-lg cyber-border text-xs font-mono">
                            <span class="w-2.5 h-2.5 rounded-full bg-yellow-400 animate-pulse"></span>
                            <span id="loc-status-text" class="text-yellow-400">INITIALIZING GPS...</span>
                        </div>
                    </div>
                </div>
            </header>

            <main class="flex-1 p-6 overflow-auto">
                <div class="max-w-6xl mx-auto">
                    <section class="mb-8">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch">
                            <div class="lg:col-span-2 hologram rounded-3xl p-8 flex flex-col items-center justify-center min-h-96 cyber-border relative overflow-hidden group cursor-pointer">
                                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                <div class="relative z-10 text-center">
                                    <p id="sos-title" class="text-red-400 text-sm font-mono tracking-widest mb-6 uppercase">Emergency Alert System</p>
                                    <button id="sos-btn" class="relative w-48 h-48 mb-6 group mx-auto">
                                        <div class="absolute inset-0 rounded-full border-2 border-red-500/30 sos-danger"></div>
                                        <div class="absolute inset-8 rounded-full border-2 border-red-500/60 sos-danger" style="animation-delay: 0.3s;"></div>
                                        <div class="absolute inset-16 rounded-full border-2 border-red-500/80 sos-danger" style="animation-delay: 0.6s;"></div>
                                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-red-600 via-red-700 to-red-800 shadow-2xl shadow-red-600/50 flex flex-col items-center justify-center group-hover:shadow-red-500/80 transition-all duration-300 active:scale-95 cursor-pointer">
                                            <svg class="w-16 h-16 mb-2 drop-shadow-lg" fill="currentColor" viewbox="0 0 24 24">
                                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
                                            </svg>
                                            <span id="sos-text" class="text-2xl font-black text-white drop-shadow-lg tracking-widest text-center px-2 leading-tight">TAP FOR HELP</span>
                                        </div>
                                    </button>
                                    <p id="sos-desc" class="text-gray-400 text-xs font-mono px-4">Press and send SOS. Background secret recording will start automatically.</p>
                                </div>
                            </div>

                            <div class="flex flex-col gap-6">
                                <div class="hologram rounded-2xl p-6 cyber-border h-44 flex flex-col justify-between group hover:shadow-lg hover:shadow-red-500/20 transition-all">
                                    <div>
                                        <p id="live-loc-title" class="text-red-400 text-xs font-mono tracking-widest uppercase mb-2">üì° Live Location</p>
                                        <div class="relative w-12 h-12 mb-3">
                                            <div class="absolute inset-0 rounded-full bg-red-500/30 gps-ping"></div>
                                            <div class="relative w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-lg font-bold">üìç</div>
                                        </div>
                                    </div>
                                    <div>
                                        <p id="current-address" class="text-white text-xs font-mono leading-tight mb-2">Detecting location...</p>
                                        <p class="text-gray-500 text-xs font-mono">
                                            <span id="lat-display">Lat: --</span> | <span id="lng-display">Lng: --</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="hologram rounded-2xl p-4 cyber-border">
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="status-label" class="text-gray-400 font-mono">STATUS</span>
                                            <span id="status-val" class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full font-mono">ARMED</span>
                                        </div>
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="gps-label" class="text-gray-400 font-mono">GPS SIGNAL</span>
                                            <span id="gps-status-text" class="text-yellow-400 font-mono">SEARCHING</span>
                                        </div>
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="media-label" class="text-gray-400 font-mono">MEDIA PERMISSIONS</span>
                                            <span id="media-status" class="text-yellow-400 font-mono">PENDING</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="mb-8">
                        <h2 id="tools-title" class="text-sm font-mono tracking-widest text-red-400 uppercase mb-6">‚öîÔ∏è Emergency Tools</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button id="location-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-cyan-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-cyan-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    </svg>
                                </div>
                                <p id="btn-loc-title" class="font-bold text-white text-sm mb-1">LIVE LOCATION</p>
                                <p id="btn-loc-desc" class="text-xs text-gray-400">Stream & Share</p>
                            </button>

                            <button id="fakecall-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-green-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-green-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
                                    </svg>
                                </div>
                                <p id="btn-call-title" class="font-bold text-white text-sm mb-1">FAKE CALL</p>
                                <p id="btn-call-desc" class="text-xs text-gray-400">Escape Safely</p>
                            </button>

                            <button id="record-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-purple-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500/20 to-violet-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-purple-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                    </svg>
                                </div>
                                <p id="btn-rec-title" class="font-bold text-white text-sm mb-1 text-center">RECORD EVIDENCE</p>
                                <p id="btn-rec-desc" class="text-xs text-gray-400">Audio & Video Proof</p>
                            </button>

                            <button id="history-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-orange-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500/20 to-amber-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-orange-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7h-3v3H9v-3H6v-2h3V6h2v3h3v2z" />
                                    </svg>
                                </div>
                                <p id="btn-hist-title" class="font-bold text-white text-sm mb-1">LOCATION HISTORY</p>
                                <p id="btn-hist-desc" class="text-xs text-gray-400">View Timeline</p>
                            </button>
                        </div>
                    </section>

                    <section class="mb-8">
                        <h2 class="text-sm font-mono tracking-widest text-red-400 uppercase mb-4">üö® National Helplines</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <a href="tel:112" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-red-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-xl">üÜò</div>
                                <div>
                                    <p class="font-bold text-sm text-white">National Emergency</p>
                                    <p class="text-xl text-red-400 font-black">112</p>
                                </div>
                            </a>
                            <a href="tel:100" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-blue-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-xl">üöì</div>
                                <div>
                                    <p class="font-bold text-sm text-white">Police</p>
                                    <p class="text-xl text-blue-400 font-black">100</p>
                                </div>
                            </a>
                            <a href="tel:181" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-pink-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-xl">üõ°Ô∏è</div>
                                <div>
                                    <p class="font-bold text-sm text-white">Women Helpline</p>
                                    <p class="text-xl text-pink-400 font-black">181</p>
                                </div>
                            </a>
                        </div>
                    </section>

                    <section class="mb-8">
                       window.fbGetDoc = getDoc;
        window.fbCollection = collection;
        window.fbAddDoc = addDoc;
    </script>

    <style>
        * { font-family: 'Lexend', sans-serif; }
        body { background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0d1628 100%); box-sizing: border-box; }
        @keyframes danger-pulse { 0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3), inset 0 0 20px rgba(239, 68, 68, 0.1); } 50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.6), inset 0 0 30px rgba(239, 68, 68, 0.2); } }
        @keyframes gps-pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.1); opacity: 0.8; } }
        @keyframes slideUp { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes recording-pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .sos-danger { animation: danger-pulse 2s infinite; }
        .gps-ping { animation: gps-pulse 1.5s infinite; }
        .neural-grid { background-image: linear-gradient(rgba(99, 102, 241, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(99, 102, 241, 0.1) 1px, transparent 1px); background-size: 50px 50px; }
        .cyber-border { border: 2px solid; border-image: linear-gradient(135deg, #ff1744, #ff6e40, #ff1744) 1; box-shadow: inset 0 0 20px rgba(255, 23, 68, 0.2), 0 0 20px rgba(255, 23, 68, 0.3); }
        .hologram { background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(236, 72, 153, 0.2)); backdrop-filter: blur(10px); border: 1px solid rgba(99, 102, 241, 0.3); }
        .slide-up { animation: slideUp 0.5s ease-out forwards; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(99, 102, 241, 0.05); }
        ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #ff1744, #ff6e40); border-radius: 4px; }
    </style>
</head>

<body class="h-full">
    <div id="app" class="h-full w-full text-white overflow-auto relative neural-grid">
        <div class="fixed inset-0 pointer-events-none">
            <div class="absolute top-10 left-1/4 w-72 h-72 bg-red-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
            <div class="absolute top-40 right-1/4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
            <div class="absolute -bottom-8 left-1/2 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"></div>
        </div>

        <div class="min-h-full w-full flex flex-col relative z-10">
            <header class="p-6 border-b-2 border-red-500/30 hologram">
                <div class="max-w-6xl mx-auto flex items-center justify-between flex-wrap gap-4">
                    <div class="flex items-center gap-4">
                        <div class="relative">
                            <div class="absolute inset-0 rounded-lg bg-gradient-to-r from-red-600 to-pink-600 blur-xl opacity-50"></div>
                            <div class="relative w-12 h-12 rounded-lg bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center">
                                <svg class="w-7 h-7 drop-shadow-lg" fill="currentColor" viewbox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M5.5 17a4.5 4.5 0 01-1.44-8.765 4.5 4.5 0 018.752.75c.133.056.26.119.38.187a4.5 4.5 0 01-.88 8.828H5.5z" clip-rule="evenodd" />
                                </svg>
                            </div>
                        </div>
                        <div>
                            <h1 id="app-title" class="text-2xl font-black bg-gradient-to-r from-red-400 via-pink-400 to-orange-400 bg-clip-text text-transparent tracking-wider">NAARI SURAKSHA</h1>
                            <p id="app-subtitle" class="text-xs text-cyan-400 tracking-widest font-mono">‚ö° SECURITY SYSTEM ACTIVE</p>
                        </div>
                    </div>

                    <div class="flex items-center gap-3">
                        <button id="install-btn" class="hidden bg-gradient-to-r from-green-500 to-emerald-600 text-white text-xs font-bold px-3 py-1.5 rounded-lg shadow-lg shadow-green-500/30 hover:scale-105 transition-transform">üì≤ INSTALL APP</button>
                        <button id="cloud-settings-btn" class="p-1.5 bg-white/10 rounded-lg hover:bg-white/20 transition-colors text-sm border border-white/20 cursor-pointer">‚öôÔ∏è</button>
                        <select id="lang-selector" class="bg-black/40 border border-white/20 text-xs rounded-lg px-2 py-1.5 text-white outline-none cursor-pointer focus:border-red-500 transition-colors font-mono">
                            <option value="en">English</option>
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
                            <option value="rj">‡§∞‡§æ‡§ú‡§∏‡•ç‡§•‡§æ‡§®‡•Ä (Rajasthani)</option>
                            <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                            <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                            <option value="or">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü (Odia)</option>
                            <option value="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ (Assamese)</option>
                            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                            <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                        </select>
                        <div id="location-status" class="flex items-center gap-2 px-4 py-2 rounded-lg cyber-border text-xs font-mono">
                            <span class="w-2.5 h-2.5 rounded-full bg-yellow-400 animate-pulse"></span>
                            <span id="loc-status-text" class="text-yellow-400">INITIALIZING GPS...</span>
                        </div>
                    </div>
                </div>
            </header>

            <main class="flex-1 p-6 overflow-auto">
                <div class="max-w-6xl mx-auto">
                    <section class="mb-8">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch">
                            <div class="lg:col-span-2 hologram rounded-3xl p-8 flex flex-col items-center justify-center min-h-96 cyber-border relative overflow-hidden group cursor-pointer">
                                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                <div class="relative z-10 text-center">
                                    <p id="sos-title" class="text-red-400 text-sm font-mono tracking-widest mb-6 uppercase">Emergency Alert System</p>
                                    <button id="sos-btn" class="relative w-48 h-48 mb-6 group mx-auto">
                                        <div class="absolute inset-0 rounded-full border-2 border-red-500/30 sos-danger"></div>
                                        <div class="absolute inset-8 rounded-full border-2 border-red-500/60 sos-danger" style="animation-delay: 0.3s;"></div>
                                        <div class="absolute inset-16 rounded-full border-2 border-red-500/80 sos-danger" style="animation-delay: 0.6s;"></div>
                                        <div class="absolute inset-0 rounded-full bg-gradient-to-br from-red-600 via-red-700 to-red-800 shadow-2xl shadow-red-600/50 flex flex-col items-center justify-center group-hover:shadow-red-500/80 transition-all duration-300 active:scale-95 cursor-pointer">
                                            <svg class="w-16 h-16 mb-2 drop-shadow-lg" fill="currentColor" viewbox="0 0 24 24">
                                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" />
                                            </svg>
                                            <span id="sos-text" class="text-2xl font-black text-white drop-shadow-lg tracking-widest text-center px-2 leading-tight">TAP FOR HELP</span>
                                        </div>
                                    </button>
                                    <p id="sos-desc" class="text-gray-400 text-xs font-mono px-4">Press and send SOS. Background secret recording will start automatically.</p>
                                </div>
                            </div>

                            <div class="flex flex-col gap-6">
                                <div class="hologram rounded-2xl p-6 cyber-border h-44 flex flex-col justify-between group hover:shadow-lg hover:shadow-red-500/20 transition-all">
                                    <div>
                                        <p id="live-loc-title" class="text-red-400 text-xs font-mono tracking-widest uppercase mb-2">üì° Live Location</p>
                                        <div class="relative w-12 h-12 mb-3">
                                            <div class="absolute inset-0 rounded-full bg-red-500/30 gps-ping"></div>
                                            <div class="relative w-12 h-12 rounded-full bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center text-lg font-bold">üìç</div>
                                        </div>
                                    </div>
                                    <div>
                                        <p id="current-address" class="text-white text-xs font-mono leading-tight mb-2">Detecting location...</p>
                                        <p class="text-gray-500 text-xs font-mono">
                                            <span id="lat-display">Lat: --</span> | <span id="lng-display">Lng: --</span>
                                        </p>
                                    </div>
                                </div>

                                <div class="hologram rounded-2xl p-4 cyber-border">
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="status-label" class="text-gray-400 font-mono">STATUS</span>
                                            <span id="status-val" class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full font-mono">ARMED</span>
                                        </div>
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="gps-label" class="text-gray-400 font-mono">GPS SIGNAL</span>
                                            <span id="gps-status-text" class="text-yellow-400 font-mono">SEARCHING</span>
                                        </div>
                                        <div class="flex items-center justify-between text-xs">
                                            <span id="media-label" class="text-gray-400 font-mono">MEDIA PERMISSIONS</span>
                                            <span id="media-status" class="text-yellow-400 font-mono">PENDING</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="mb-8">
                        <h2 id="tools-title" class="text-sm font-mono tracking-widest text-red-400 uppercase mb-6">‚öîÔ∏è Emergency Tools</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <button id="location-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-cyan-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-cyan-500/20 to-blue-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-cyan-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    </svg>
                                </div>
                                <p id="btn-loc-title" class="font-bold text-white text-sm mb-1">LIVE LOCATION</p>
                                <p id="btn-loc-desc" class="text-xs text-gray-400">Stream & Share</p>
                            </button>

                            <button id="fakecall-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-green-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-green-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
                                    </svg>
                                </div>
                                <p id="btn-call-title" class="font-bold text-white text-sm mb-1">FAKE CALL</p>
                                <p id="btn-call-desc" class="text-xs text-gray-400">Escape Safely</p>
                            </button>

                            <button id="record-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-purple-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500/20 to-violet-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-purple-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                    </svg>
                                </div>
                                <p id="btn-rec-title" class="font-bold text-white text-sm mb-1 text-center">RECORD EVIDENCE</p>
                                <p id="btn-rec-desc" class="text-xs text-gray-400">Audio & Video Proof</p>
                            </button>

                            <button id="history-btn" class="hologram rounded-2xl p-6 cyber-border group hover:shadow-orange-500/50 transition-all cursor-pointer h-40 flex flex-col items-center justify-center">
                                <div class="w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500/20 to-amber-600/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform">
                                    <svg class="w-7 h-7 text-orange-400" fill="currentColor" viewbox="0 0 24 24">
                                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7h-3v3H9v-3H6v-2h3V6h2v3h3v2z" />
                                    </svg>
                                </div>
                                <p id="btn-hist-title" class="font-bold text-white text-sm mb-1">LOCATION HISTORY</p>
                                <p id="btn-hist-desc" class="text-xs text-gray-400">View Timeline</p>
                            </button>
                        </div>
                    </section>

                    <section class="mb-8">
                        <h2 class="text-sm font-mono tracking-widest text-red-400 uppercase mb-4">üö® National Helplines</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <a href="tel:112" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-red-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-red-500/30 flex items-center justify-center text-xl">üÜò</div>
                                <div>
                                    <p class="font-bold text-sm text-white">National Emergency</p>
                                    <p class="text-xl text-red-400 font-black">112</p>
                                </div>
                            </a>
                            <a href="tel:100" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-blue-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-blue-500/30 flex items-center justify-center text-xl">üöì</div>
                                <div>
                                    <p class="font-bold text-sm text-white">Police</p>
                                    <p class="text-xl text-blue-400 font-black">100</p>
                                </div>
                            </a>
                            <a href="tel:181" class="hologram rounded-2xl p-4 cyber-border flex items-center gap-4 hover:shadow-pink-500/50 transition-all cursor-pointer">
                                <div class="w-12 h-12 rounded-full bg-pink-500/30 flex items-center justify-center text-xl">üõ°Ô∏è</div>
                                <div>
                                    <p class="font-bold text-sm text-white">Women Helpline</p>
                                    <p class="text-xl text-pink-400 font-black">181</p>
                                </div>
                            </a>
                        </div>
                    </section>

                    <section class="mb-8">
                        <h2 id="contacts-title" class="text-sm font-mono tracking-widest text-red-400 uppercase mb-4">üîå Emergency Contacts</h2>
                        <div class="hologram rounded-2xl p-6 cyber-border">
                            <div class="grid grid-cols-2 gap-4">
                                <div id="contact-1-card" class="bg-gradient-to-br from-blue-500/10 to-cyan-500/10 rounded-xl p-4 border border-blue-500/20 cursor-pointer hover:bg-blue-500/20 transition-colors">
                                    <p id="contact-1-label" class="text-xs text-gray-400 font-mono mb-2">PRIMARY CONTACT</p>
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg bg-blue-500/30 flex items-center justify-center text-lg">üë®</div>
                                        <div>
                                            <p id="contact-1-name" class="font-bold text-sm">Papa</p>
                                            <p class="text-xs text-cyan-400 font-bold" id="c1-ready">TAP TO CALL</p>
                                        </div>
                                    </div>
                                </div>
                                <div id="contact-2-card" class="bg-gradient-to-br from-pink-500/10 to-red-500/10 rounded-xl p-4 border border-pink-500/20 cursor-pointer hover:bg-pink-500/20 transition-colors">
                                    <p id="contact-2-label" class="text-xs text-gray-400 font-mono mb-2">SECONDARY CONTACT</p>
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg bg-pink-500/30 flex items-center justify-center text-lg">üë©</div>
                                        <div>
                                            <p id="contact-2-name" class="font-bold text-sm">Mummy</p>
                                            <p class="text-xs text-pink-400 font-bold" id="c2-ready">TAP TO CALL</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </main>

            <footer class="p-4 border-t border-red-500/20 hologram text-center text-xs text-gray-500 font-mono">
                <p id="footer-txt">üîê ENCRYPTED | üõ°Ô∏è SECURE | ‚ö° REAL-TIME</p>
            </footer>
        </div>

        <div id="cloud-settings-modal" class="fixed inset-0 z-[60] hidden">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
            <div class="relative h-full flex flex-col items-center justify-center p-6 slide-up">
                <div class="hologram rounded-3xl p-6 w-full max-w-sm cyber-border bg-[#1a1f3a]">
                    <h3 class="text-center text-xl font-bold mb-6 text-white">Emergency Setup</h3>
                    <div class="flex flex-col gap-4">
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <label class="text-[10px] text-gray-400 mb-1 block">Primary Name</label>
                                <input id="cloud-n1" type="text" placeholder="Papa" class="w-full bg-black/40 border border-white/20 rounded-lg px-3 py-3 text-white outline-none focus:border-red-500 text-sm transition-colors">
                            </div>
                            <div>
                                <label class="text-[10px] text-gray-400 mb-1 block">Phone Number</label>
                                <input id="cloud-p1" type="tel" placeholder="+91..." class="w-full bg-black/40 border border-white/20 rounded-lg px-3 py-3 text-white outline-none focus:border-red-500 text-sm transition-colors">
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <label class="text-[10px] text-gray-400 mb-1 block">Secondary Name</label>
                                <input id="cloud-n2" type="text" placeholder="Mummy" class="w-full bg-black/40 border border-white/20 rounded-lg px-3 py-3 text-white outline-none focus:border-red-500 text-sm transition-colors">
                            </div>
                            <div>
                                <label class="text-[10px] text-gray-400 mb-1 block">Phone Number</label>
                                <input id="cloud-p2" type="tel" placeholder="+91..." class="w-full bg-black/40 border border-white/20 rounded-lg px-3 py-3 text-white outline-none focus:border-red-500 text-sm transition-colors">
                            </div>
                        </div>
                        <button onclick="forceSave()" class="mt-2 w-full bg-gradient-to-r from-red-600 to-red-800 text-white font-bold py-4 rounded-xl hover:shadow-lg hover:shadow-red-500/50 transition-all active:scale-95 tracking-widest cursor-pointer">
                            SAVE TO SYSTEM
                        </button>
                    </div>
                    <button onclick="document.getElementById('cloud-settings-modal').classList.add('hidden')" class="mt-4 w-full py-3 text-gray-400 hover:text-white transition-colors cursor-pointer font-bold">Cancel</button>
                </div>
            </div>
        </div>

        <div id="fakecall-modal" class="fixed inset-0 z-50 hidden">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
            <div class="relative h-full flex flex-col items-center justify-center p-6 slide-up">
                <div class="hologram rounded-3xl p-6 w-full max-w-sm cyber-border">
                    <h3 id="modal-call-title" class="text-center text-lg font-semibold mb-6">Choose Caller</h3>
                    <div class="flex flex-col gap-4">
                        <button id="call-papa" class="flex items-center gap-4 p-4 bg-white/5 rounded-2xl hover:bg-white/10 transition-all cursor-pointer">
                            <div class="w-14 h-14 rounded-full bg-blue-500/30 flex items-center justify-center text-2xl">üë®</div>
                            <div class="text-left"><p id="caller-papa-name" class="font-semibold">Papa</p></div>
                        </button>
                        <button id="call-mummy" class="flex items-center gap-4 p-4 bg-white/5 rounded-2xl hover:bg-white/10 transition-all cursor-pointer">
                            <div class="w-14 h-14 rounded-full bg-pink-500/30 flex items-center justify-center text-2xl">üë©</div>
                            <div class="text-left"><p id="caller-mummy-name" class="font-semibold">Mummy</p></div>
                        </button>
                    </div>
                    <button id="close-fakecall-modal" class="mt-6 w-full py-3 text-gray-400 hover:text-white transition-colors cursor-pointer">Cancel</button>
                </div>
            </div>
        </div>

        <div id="call-screen" class="fixed inset-0 z-50 hidden" style="background: linear-gradient(180deg, #1e3a5f 0%, #0d1b2a 100%);">
            <div class="h-full flex flex-col items-center justify-between py-12 px-6">
                <div class="text-center">
                    <p id="inc-call-txt" class="text-gray-400 text-sm mb-2">Incoming call</p>
                    <div id="caller-avatar" class="w-28 h-28 rounded-full bg-blue-500/30 flex items-center justify-center text-5xl mx-auto mb-4" style="animation: gps-pulse 1.5s infinite;">üë®</div>
                    <h2 id="caller-name-display" class="text-3xl font-bold mb-1">Papa</h2>
                    <p class="text-gray-400">Mobile</p>
                </div>
                <div id="call-status" class="text-center">
                    <p id="call-status-txt" class="text-lg text-gray-300">Calling...</p>
                    <p id="call-timer" class="text-4xl font-light text-white mt-2">00:00</p>
                </div>
                <div class="flex gap-8">
                    <button id="decline-call" class="w-16 h-16 rounded-full bg-red-500 flex items-center justify-center hover:bg-red-600 transition-colors cursor-pointer">
                        <svg class="w-8 h-8 rotate-[135deg]" fill="currentColor" viewbox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z" /></svg>
                    </button>
                    <button id="accept-call" class="w-16 h-16 rounded-full bg-green-500 flex items-center justify-center hover:bg-green-600 transition-colors cursor-pointer">
                        <svg class="w-8 h-8" fill="currentColor" viewbox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z" /></svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="record-modal" class="fixed inset-0 z-50 hidden">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
            <div class="relative h-full flex flex-col items-center justify-center p-6">
                <div class="hologram rounded-3xl p-6 w-full max-w-sm cyber-border slide-up">
                    <h3 id="modal-rec-title" class="text-center text-lg font-semibold mb-2">Record Evidence</h3>
                    <p id="modal-rec-desc" class="text-center text-sm text-gray-400 mb-6">Audio & video will be saved as proof locally</p>
                    
                    <div id="recording-status" class="hidden mb-6">
                        <div class="flex items-center justify-center gap-2 mb-4">
                            <span class="w-3 h-3 rounded-full bg-red-500" style="animation: recording-pulse 1s ease-in-out infinite;"></span>
                            <span id="rec-active-txt" class="text-red-400 font-medium">Recording in Progress</span>
                        </div>
                        <div id="recording-timer" class="text-4xl font-light text-center">00:00</div>
                    </div>
                    
                    <div id="video-preview" class="hidden mb-4 rounded-xl overflow-hidden bg-black aspect-video border border-red-500/50">
                        <video id="preview-video" autoplay muted playsinline class="w-full h-full object-cover"></video>
                    </div>
                    
                    <div class="flex flex-col gap-3">
                        <button id="start-audio-record" class="flex items-center justify-center gap-3 p-4 bg-purple-500/20 rounded-xl hover:bg-purple-500/30 transition-all cursor-pointer">
                            <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /></svg>
                            <span id="btn-aud-txt" class="font-medium">Record Audio</span>
                        </button>
                        
                        <button id="start-video-record" class="flex items-center justify-center gap-3 p-4 bg-violet-500/20 rounded-xl hover:bg-violet-500/30 transition-all cursor-pointer">
                            <svg class="w-6 h-6 text-violet-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            <span id="btn-vid-txt" class="font-medium">Record Video</span>
                        </button>
                        
                        <button id="stop-record" class="hidden items-center justify-center gap-3 p-4 bg-red-600 rounded-xl hover:bg-red-700 transition-all cursor-pointer shadow-lg shadow-red-500/50">
                            <span id="btn-stop-txt" class="font-bold text-white tracking-wider">üõë STOP & SAVE LOCALLY</span>
                        </button>
                    </div>
                    <button id="close-record-modal" class="mt-6 w-full py-3 text-gray-400 hover:text-white transition-colors cursor-pointer">Close Menu</button>
                </div>
            </div>
        </div>

        <div id="history-modal" class="fixed inset-0 z-50 hidden">
            <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
            <div class="relative h-full flex flex-col p-6 overflow-auto">
                <div class="hologram rounded-3xl p-6 w-full max-w-lg mx-auto cyber-border slide-up">
                    <div class="flex items-center justify-between mb-6">
                        <h3 id="modal-hist-title" class="text-lg font-semibold">üìç Location History</h3>
                        <button id="close-history-modal" class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 cursor-pointer">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                        </button>
                    </div>
                    <div id="history-list" class="flex flex-col gap-3 max-h-96 overflow-auto">
                        <p class="text-gray-400 text-sm text-center py-8">No location history yet</p>
                    </div>
                    <button id="clear-history" class="mt-4 w-full py-3 bg-red-500/20 text-red-400 rounded-xl hover:bg-red-500/30 transition-colors cursor-pointer">Clear All History</button>
                </div>
            </div>
        </div>

        <div id="toast" class="fixed top-4 left-1/2 -translate-x-1/2 z-[100] hidden">
            <div class="hologram rounded-full px-6 py-3 flex items-center gap-3 slide-up cyber-border bg-[#0d1628]">
                <span class="w-6 h-6 rounded-full bg-green-500 flex items-center justify-center text-white text-xs font-bold">‚úì</span>
                <span id="toast-message" class="font-medium text-sm text-green-400">Action Complete</span>
            </div>
        </div>
    </div>

    <script>
        // --- DEVICE ID SETUP ---
        let deviceId = localStorage.getItem('naruksha_device_id');
        if (!deviceId) {
            deviceId = 'user_' + Date.now() + '_' + Math.random().toString(36).substring(2, 9);
            localStorage.setItem('naruksha_device_id', deviceId);
        }

        // --- TRANSLATION DICTIONARY ---
        const i18n = {
            en: { subtitle: "‚ö° SECURITY SYSTEM ACTIVE", sosTitle: "Emergency Alert System", sosBtn: "TAP FOR HELP", sosDesc: "Press and send SOS. Background secret recording will start automatically.", liveLoc: "üì° Live Location", detecting: "Detecting location...", status: "STATUS", armed: "ARMED", gpsSig: "GPS SIGNAL", mediaPerm: "MEDIA PERMISSIONS", tools: "‚öîÔ∏è Emergency Tools", btnLoc: "LIVE LOCATION", btnLocDesc: "Stream & Share", btnCall: "FAKE CALL", btnCallDesc: "Escape Safely", btnRec: "RECORD EVIDENCE", btnRecDesc: "Audio & Video Proof", btnHist: "LOCATION HISTORY", btnHistDesc: "View Timeline", contacts: "üîå Emergency Contacts", primary: "PRIMARY CONTACT", secondary: "SECONDARY CONTACT", ready: "TAP TO CALL", footer: "üîê ENCRYPTED | üõ°Ô∏è SECURE | ‚ö° REAL-TIME" },
            hi: { subtitle: "‚ö° ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø", sosTitle: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ", sosBtn: "‡§Æ‡§¶‡§¶ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡§¨‡§æ‡§è‡§Ç", sosDesc: "SOS ‡§≠‡•á‡§ú‡•á‡§Ç‡•§ ‡§ó‡•Å‡§™‡•ç‡§§ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡•Ä‡•§", liveLoc: "üì° ‡§≤‡§æ‡§á‡§µ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", detecting: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ñ‡•ã‡§ú ‡§∞‡§π‡§æ ‡§π‡•à...", status: "‡§∏‡•ç‡§•‡§ø‡§§‡§ø", armed: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø", gpsSig: "‡§ú‡•Ä‡§™‡•Ä‡§è‡§∏ ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤", mediaPerm: "‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡§æ‡§Ç", tools: "‚öîÔ∏è ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§â‡§™‡§ï‡§∞‡§£", btnLoc: "‡§≤‡§æ‡§á‡§µ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", btnLocDesc: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ ‡§î‡§∞ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç", btnCall: "‡§´‡§∞‡•ç‡§ú‡•Ä ‡§ï‡•â‡§≤", btnCallDesc: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§¨‡§ö‡•á‡§Ç", btnRec: "‡§∏‡§¨‡•Ç‡§§ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§ï‡§∞‡•á‡§Ç", btnRecDesc: "‡§ë‡§°‡§ø‡§Ø‡•ã/‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£", btnHist: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§ï‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏", btnHistDesc: "‡§ü‡§æ‡§á‡§Æ‡§≤‡§æ‡§á‡§® ‡§¶‡•á‡§ñ‡•á‡§Ç", contacts: "üîå ‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", primary: "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", secondary: "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡§ï ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", ready: "‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç", footer: "üîê ‡§è‡§®‡•ç‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü‡•á‡§° | üõ°Ô∏è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ | ‚ö° ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï ‡§∏‡§Æ‡§Ø" },
            rj: { subtitle: "‚ö° ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ö‡§æ‡§≤‡•Ç", sosTitle: "‡§á‡§Æ‡§∞‡§ú‡•á‡§Ç‡§∏‡•Ä ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ", sosBtn: "‡§Æ‡§¶‡§¶ ‡§ñ‡§æ‡§§‡§ø‡§∞ ‡§¶‡§¨‡§æ‡§ì", sosDesc: "SOS ‡§≠‡•á‡§ú‡•ã‡•§ ‡§ó‡•Å‡§™‡•ç‡§§ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§µ‡•á‡§ó‡•Ä‡•§", liveLoc: "üì° ‡§≤‡§æ‡§á‡§µ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", detecting: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§¢‡•Ç‡§Ç‡§¢‡•á ‡§π‡•à...", status: "‡§∏‡•ç‡§•‡§ø‡§§‡§ø", armed: "‡§ö‡§æ‡§≤‡•Ç", gpsSig: "GPS ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤", mediaPerm: "‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞‡§Æ‡§ø‡§∂‡§®", tools: "‚öîÔ∏è ‡§á‡§Æ‡§∞‡§ú‡•á‡§Ç‡§∏‡•Ä ‡§ü‡•Ç‡§≤", btnLoc: "‡§≤‡§æ‡§á‡§µ ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", btnLocDesc: "‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•ã", btnCall: "‡§´‡§∞‡•ç‡§ú‡•Ä ‡§ï‡•â‡§≤", btnCallDesc: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§¨‡§ö‡•ã", btnRec: "‡§∏‡§¨‡•Ç‡§§ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§°", btnRecDesc: "‡§ë‡§°‡§ø‡§Ø‡•ã/‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã", btnHist: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§π‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä", btnHistDesc: "‡§ü‡§æ‡§á‡§Æ‡§≤‡§æ‡§á‡§® ‡§¶‡•á‡§ñ‡•ã", contacts: "üîå ‡§á‡§Æ‡§∞‡§ú‡•á‡§Ç‡§∏‡•Ä ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", primary: "‡§™‡§π‡§≤‡•ã ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", secondary: "‡§¶‡•Ç‡§ú‡•ã ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", ready: "‡§ï‡•â‡§≤ ‡§ï‡§∞‡§æ‡§Ç", footer: "üîê ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ | ‚ö° ‡§∞‡§ø‡§Ø‡§≤-‡§ü‡§æ‡§á‡§Æ" },
            pa: { subtitle: "‚ö° ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ü ‡®∏‡®ø‡®∏‡®ü‡®Æ ‡®∏‡®∞‡®ó‡®∞‡®Æ", sosTitle: "‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®Ö‡®≤‡®∞‡®ü ‡®∏‡®ø‡®∏‡®ü‡®Æ", sosBtn: "‡®Æ‡®¶‡®¶ ‡®≤‡®à ‡®¶‡®¨‡®æ‡®ì", sosDesc: "SOS ‡®≠‡©á‡®ú‡©ã‡•§ ‡®ó‡©Å‡®™‡®§ ‡®∞‡®ø‡®ï‡®æ‡®∞‡®°‡®ø‡©∞‡®ó ‡®Ü‡®™‡®£‡©á ‡®Ü‡®™ ‡®∏‡®º‡©Å‡®∞‡©Ç ‡®π‡©ã ‡®ú‡®æ‡®µ‡©á‡®ó‡©Ä‡•§", liveLoc: "üì° ‡®≤‡®æ‡®à‡®µ ‡®≤‡©ã‡®ï‡©á‡®∏‡®º‡®®", detecting: "‡®≤‡©ã‡®ï‡©á‡®∏‡®º‡®® ‡®≤‡©±‡®≠ ‡®∞‡®ø‡®π‡®æ ‡®π‡©à...", status: "‡®∏‡®•‡®ø‡®§‡©Ä", armed: "‡®∏‡®∞‡®ó‡®∞‡®Æ", gpsSig: "GPS ‡®∏‡®ø‡®ó‡®®‡®≤", mediaPerm: "‡®Æ‡©Ä‡®°‡©Ä‡®Ü ‡®á‡®ú‡®æ‡®ú‡®º‡®§‡®æ‡®Ç", tools: "‚öîÔ∏è ‡®ê‡®Æ‡®∞‡®ú‡©à‡®Ç‡®∏‡©Ä ‡®ü‡©Ç‡®≤", btnLoc: "‡®≤‡®æ‡®à‡®µ ‡®≤‡©ã‡®ï‡©á‡®∏‡®º‡®®", btnLocDesc: "‡®∏‡®º‡©á‡®Ö‡®∞ ‡®ï‡®∞‡©ã", btnCall: "‡®´‡®∞‡®ú‡®º‡©Ä ‡®ï‡®æ‡®≤", btnCallDesc: "‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ ‡®¨‡®ö‡©ã", btnRec: "‡®∏‡®¨‡©Ç‡®§ ‡®∞‡®ø‡®ï‡®æ‡®∞‡®°", btnRecDesc: "‡®Ü‡®°‡©Ä‡®ì/‡®µ‡©Ä‡®°‡©Ä‡®ì", btnHist: "‡®≤‡©ã‡®ï‡©á‡®∏‡®º‡®® ‡®á‡®§‡®ø‡®π‡®æ‡®∏", btnHistDesc: "‡®ü‡®æ‡®à‡®Æ‡®≤‡®æ‡®à‡®® ‡®¶‡©á‡®ñ‡©ã", contacts: "üîå ‡®∏‡©∞‡®™‡®∞‡®ï", primary: "‡®™‡®π‡®ø‡®≤‡®æ ‡®∏‡©∞‡®™‡®∞‡®ï", secondary: "‡®¶‡©Ç‡®ú‡®æ ‡®∏‡©∞‡®™‡®∞‡®ï", ready: "‡®ï‡®æ‡®≤ ‡®ï‡®∞‡©ã", footer: "üîê ‡®∏‡©Å‡®∞‡©±‡®ñ‡®ø‡®Ö‡®§ | ‚ö° ‡®∞‡©Ä‡®Ö‡®≤-‡®ü‡®æ‡®à‡®Æ" },
            gu: { subtitle: "‚ö° ‡™∏‡´Å‡™∞‡™ï‡´ç‡™∑‡™æ ‡™∏‡™ø‡™∏‡´ç‡™ü‡™Æ ‡™∏‡™ï‡´ç‡™∞‡™ø‡™Ø", sosTitle: "‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä ‡™ö‡´á‡™§‡™µ‡™£‡´Ä ‡™∏‡™ø‡™∏‡´ç‡™ü‡™Æ", sosBtn: "‡™Æ‡™¶‡™¶ ‡™Æ‡™æ‡™ü‡´á ‡™¶‡™¨‡™æ‡™µ‡´ã", sosDesc: "SOS ‡™Æ‡´ã‡™ï‡™≤‡´ã. ‡™ó‡´Å‡™™‡´ç‡™§ ‡™∞‡´á‡™ï‡´ã‡™∞‡´ç‡™°‡™ø‡™Ç‡™ó ‡™Ü‡™™‡™Æ‡´á‡™≥‡´á ‡™∂‡™∞‡´Ç ‡™•‡™∂‡´á.", liveLoc: "üì° ‡™≤‡™æ‡™á‡™µ ‡™≤‡´ã‡™ï‡´á‡™∂‡™®", detecting: "‡™≤‡´ã‡§ï‡•á‡§∂‡§® ‡™∂‡´ã‡™ß‡´Ä ‡™∞‡™π‡´ç‡™Ø‡´Å‡™Ç ‡™õ‡´á...", status: "‡™∏‡´ç‡™•‡™ø‡™§‡™ø", armed: "‡™∏‡™ï‡´ç‡™∞‡™ø‡™Ø", gpsSig: "‡™ú‡´Ä‡™™‡´Ä‡™è‡™∏ ‡™∏‡™ø‡™ó‡´ç‡™®‡™≤", mediaPerm: "‡™Æ‡´Ä‡™°‡™ø‡™Ø‡™æ ‡™™‡™∞‡™µ‡™æ‡™®‡™ó‡´Ä‡™ì", tools: "‚öîÔ∏è ‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä‡™®‡™æ‡™Ç ‡™∏‡™æ‡™ß‡™®‡´ã", btnLoc: "‡™≤‡™æ‡™á‡™µ ‡™≤‡´ã‡™ï‡´á‡™∂‡™®", btnLocDesc: "‡™∏‡´ç‡™ü‡´ç‡™∞‡´Ä‡™Æ ‡™Ö‡™®‡´á ‡™∂‡´á‡™∞ ‡™ï‡™∞‡´ã", btnCall: "‡™®‡™ï‡™≤‡´Ä ‡™ï‡´â‡™≤", btnCallDesc: "‡™∏‡™≤‡™æ‡™Æ‡™§ ‡™¨‡™ö‡´ã", btnRec: "‡™™‡´Å‡™∞‡™æ‡™µ‡™æ ‡™∞‡´á‡™ï‡´ã‡™∞‡´ç‡™°", btnRecDesc: "‡™ì‡™°‡™ø‡™Ø‡´ã/‡™µ‡™ø‡™°‡™ø‡™Ø‡´ã", btnHist: "‡™≤‡´ã‡™ï‡´á‡™∂‡™® ‡™á‡™§‡™ø‡™π‡™æ‡™∏", btnHistDesc: "‡™ü‡™æ‡™á‡™Æ‡™≤‡™æ‡™á‡™® ‡™ú‡´Å‡™ì", contacts: "üîå ‡™ï‡™ü‡´ã‡™ï‡™ü‡´Ä ‡™∏‡™Ç‡™™‡™∞‡´ç‡™ï‡´ã", primary: "‡™™‡´ç‡™∞‡™æ‡™•‡™Æ‡™ø‡™ï ‡™∏‡™Ç‡™™‡™∞‡´ç‡™ï", secondary: "‡™ó‡´å‡™£ ‡™∏‡™Ç‡™™‡™∞‡´ç‡™ï", ready: "‡™ï‡´â‡™≤ ‡™ï‡™∞‡´ã", footer: "üîê ‡™è‡™®‡´ç‡™ï‡´ç‡™∞‡™ø‡™™‡´ç‡™ü‡´á‡™° | üõ°Ô∏è ‡™∏‡´Å‡™∞‡™ï‡´ç‡™∑‡™ø‡™§" },
            mr: { subtitle: "‚ö° ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø", sosTitle: "‡§Ü‡§£‡•Ä‡§¨‡§æ‡§£‡•Ä ‡§Ö‡§≤‡§∞‡•ç‡§ü ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ", sosBtn: "‡§Æ‡§¶‡§§‡•Ä‡§∏‡§æ‡§†‡•Ä ‡§¶‡§æ‡§¨‡§æ", sosDesc: "SOS ‡§™‡§æ‡§†‡§µ‡§æ. ‡§ó‡•Å‡§™‡•ç‡§§ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§Ü‡§™‡•ã‡§Ü‡§™ ‡§∏‡•Å‡§∞‡•Ç ‡§π‡•ã‡§à‡§≤.", liveLoc: "üì° ‡§≤‡§æ‡§à‡§µ‡•ç‡§π ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", detecting: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§∂‡•ã‡§ß‡§§ ‡§Ü‡§π‡•á...", status: "‡§∏‡•ç‡§•‡§ø‡§§‡•Ä", armed: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø", gpsSig: "‡§ú‡•Ä‡§™‡•Ä‡§è‡§∏ ‡§∏‡§ø‡§ó‡•ç‡§®‡§≤", mediaPerm: "‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§™‡§∞‡§µ‡§æ‡§®‡§ó‡•ç‡§Ø‡§æ", tools: "‚öîÔ∏è ‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§æ‡§ß‡§®‡•á", btnLoc: "‡§≤‡§æ‡§à‡§µ‡•ç‡§π ‡§≤‡•ã‡§ï‡•á‡§∂‡§®", btnLocDesc: "‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Æ ‡§Ü‡§£‡§ø ‡§∂‡•á‡§Ö‡§∞ ‡§ï‡§∞‡§æ", btnCall: "‡§ñ‡•ã‡§ü‡§æ ‡§ï‡•â‡§≤", btnCallDesc: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∏‡•Å‡§ü‡§ï‡§æ", btnRec: "‡§™‡•Å‡§∞‡§æ‡§µ‡§æ ‡§∞‡•á‡§ï‡•â‡§∞‡•ç‡§°", btnRecDesc: "‡§ë‡§°‡§ø‡§ì/‡§µ‡•ç‡§π‡§ø‡§°‡§ø‡§ì", btnHist: "‡§≤‡•ã‡§ï‡•á‡§∂‡§® ‡§á‡§§‡§ø‡§π‡§æ‡§∏", btnHistDesc: "‡§ü‡§æ‡§á‡§Æ‡§≤‡§æ‡§á‡§® ‡§™‡§π‡§æ", contacts: "üîå ‡§Ü‡§™‡§§‡•ç‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", primary: "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", secondary: "‡§¶‡•Å‡§Ø‡•ç‡§Ø‡§Æ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï", ready: "‡§ï‡•â‡§≤ ‡§ï‡§∞‡§æ", footer: "üîê ‡§è‡§®‡§ï‡•ç‡§∞‡§ø‡§™‡•ç‡§ü‡•á‡§° | üõ°Ô∏è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§" },
            bn: { subtitle: "‚ö° ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶§‡ßç‡¶§‡¶æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º", sosTitle: "‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ", sosBtn: "‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡¶ø‡¶™‡ßÅ‡¶®", sosDesc: "SOS ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡•§ ‡¶ó‡ßã‡¶™‡¶® ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá‡•§", liveLoc: "üì° ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®", detecting: "‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶ñ‡ßã‡¶Å‡¶ú‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...", status: "‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ", armed: "‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º", gpsSig: "‡¶ú‡¶ø‡¶™‡¶ø‡¶è‡¶∏ ‡¶∏‡¶Ç‡¶ï‡ßá‡¶§", mediaPerm: "‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø", tools: "‚öîÔ∏è ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶∏‡¶∞‡¶û‡ßç‡¶ú‡¶æ‡¶Æ", btnLoc: "‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®", btnLocDesc: "‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®", btnCall: "‡¶≠‡ßÅ‡¶Ø‡¶º‡¶æ ‡¶ï‡¶≤", btnCallDesc: "‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶‡ßá ‡¶™‡¶æ‡¶≤‡¶æ‡¶®", btnRec: "‡¶™‡ßç‡¶∞‡¶Æ‡¶æ‡¶£ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°", btnRecDesc: "‡¶Ö‡¶°‡¶ø‡¶ì/‡¶≠‡¶ø‡¶°‡¶ø‡¶ì", btnHist: "‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏", btnHistDesc: "‡¶ü‡¶æ‡¶á‡¶Æ‡¶≤‡¶æ‡¶á‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®", contacts: "üîå ‡¶™‡¶∞‡¶ø‡¶ö‡¶ø‡¶§‡¶ø", primary: "‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó", secondary: "‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡¶ø‡¶ï ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó", ready: "‡¶ï‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®", footer: "üîê ‡¶è‡¶®‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ | üõ°Ô∏è ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶" },
            or: { subtitle: "‚ö° ‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨æ ‡¨¨‡≠ç‡≠ü‡¨¨‡¨∏‡≠ç‡¨•‡¨æ ‡¨∏‡¨ï‡≠ç‡¨∞‡¨ø‡≠ü", sosTitle: "‡¨ú‡¨∞‡≠Å‡¨∞‡≠Ä‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® ‡¨Ü‡¨≤‡¨∞‡≠ç‡¨ü", sosBtn: "‡¨∏‡¨æ‡¨π‡¨æ‡¨Ø‡≠ç‡≠ü ‡¨™‡¨æ‡¨á‡¨Å ‡¨¶‡¨¨‡¨æ‡¨®‡≠ç‡¨§‡≠Å", sosDesc: "SOS ‡¨™‡¨†‡¨æ‡¨®‡≠ç‡¨§‡≠Å‡•§ ‡¨ó‡≠Å‡¨™‡≠ç‡¨§ ‡¨∞‡≠á‡¨ï‡¨∞‡≠ç‡¨°‡¨ø‡¨Ç ‡¨∏‡≠ç‡≠±‡≠ü‡¨Ç‡¨ö‡¨æ‡¨≥‡¨ø‡¨§ ‡¨≠‡¨æ‡¨¨‡¨∞‡≠á ‡¨Ü‡¨∞‡¨Æ‡≠ç‡¨≠ ‡¨π‡≠á‡¨¨‡•§", liveLoc: "üì° ‡¨≤‡¨æ‡¨á‡¨≠‡≠ç ‡¨≤‡≠ã‡¨ï‡≠á‡¨∏‡¨®‡≠ç", detecting: "‡¨≤‡≠ã‡¨ï‡≠á‡¨∏‡¨®‡≠ç ‡¨ñ‡≠ã‡¨ú‡≠Å‡¨õ‡¨ø...", status: "‡¨∏‡≠ç‡¨•‡¨ø‡¨§‡¨ø", armed: "‡¨∏‡¨ï‡≠ç‡¨∞‡¨ø‡≠ü", gpsSig: "GPS ‡¨∏‡¨ø‡¨ó‡¨®‡¨æ‡¨≤‡≠ç", mediaPerm: "‡¨Æ‡¨ø‡¨°‡¨ø‡¨Ü ‡¨Ö‡¨®‡≠Å‡¨Æ‡¨§‡¨ø", tools: "‚öîÔ∏è ‡¨ú‡¨∞‡≠Å‡¨∞‡≠Ä‡¨ï‡¨æ‡¨≥‡≠Ä‡¨® ‡¨â‡¨™‡¨ï‡¨∞‡¨£", btnLoc: "‡¨≤‡¨æ‡¨á‡¨≠‡≠ç ‡¨≤‡≠ã‡¨ï‡≠á‡¨∏‡¨®‡≠ç", btnLocDesc: "‡¨∏‡≠á‡≠ü‡¨æ‡¨∞ ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å", btnCall: "‡¨®‡¨ï‡¨≤‡¨ø ‡¨ï‡¨≤‡≠ç", btnCallDesc: "‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨ø‡¨§ ‡¨∞‡≠Å‡¨π‡¨®‡≠ç‡¨§‡≠Å", btnRec: "‡¨™‡≠ç‡¨∞‡¨Æ‡¨æ‡¨£ ‡¨∞‡≠á‡¨ï‡¨∞‡≠ç‡¨°", btnRecDesc: "‡¨Ö‡¨°‡¨ø‡¨ì/‡¨≠‡¨ø‡¨°‡¨ø‡¨ì", btnHist: "‡¨≤‡≠ã‡¨ï‡≠á‡¨∏‡¨®‡≠ç ‡¨á‡¨§‡¨ø‡¨π‡¨æ‡¨∏", btnHistDesc: "‡¨ü‡¨æ‡¨á‡¨Æ‡¨≤‡¨æ‡¨á‡¨®‡≠ç ‡¨¶‡≠á‡¨ñ‡¨®‡≠ç‡¨§‡≠Å", contacts: "üîå ‡¨∏‡¨Æ‡≠ç‡¨™‡¨∞‡≠ç‡¨ï", primary: "‡¨™‡≠ç‡¨∞‡¨æ‡¨•‡¨Æ‡¨ø‡¨ï ‡¨∏‡¨Æ‡≠ç‡¨™‡¨∞‡≠ç‡¨ï", secondary: "‡¨¶‡≠ç‡¨µ‡¨ø‡¨§‡≠Ä‡≠ü ‡¨∏‡¨Æ‡≠ç‡¨™‡¨∞‡≠ç‡¨ï", ready: "‡¨ï‡¨≤‡≠ç ‡¨ï‡¨∞‡¨®‡≠ç‡¨§‡≠Å", footer: "üîê ‡¨∏‡≠Å‡¨∞‡¨ï‡≠ç‡¨∑‡¨ø‡¨§ | ‚ö° ‡¨∞‡¨ø‡¨Ö‡¨≤‡≠ç-‡¨ü‡¨æ‡¨á‡¨Æ‡≠ç" },
            as: { subtitle: "‚ö° ‡¶∏‡ßÅ‡ß∞‡¶ï‡ßç‡¶∑‡¶æ ‡¶¨‡ßç‡¶Ø‡ß±‡¶∏‡ßç‡¶•‡¶æ ‡¶∏‡¶ï‡ßç‡ß∞‡¶ø‡¶Ø‡¶º", sosTitle: "‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶è‡¶≤‡¶æ‡ß∞‡ßç‡¶ü", sosBtn: "‡¶∏‡¶π‡¶æ‡¶Ø‡¶º‡ß∞ ‡¶¨‡¶æ‡¶¨‡ßá ‡¶ü‡¶ø‡¶™‡¶ï", sosDesc: "SOS ‡¶™‡¶†‡¶æ‡¶ì‡¶ï‡•§ ‡¶ó‡ßã‡¶™‡¶® ‡ß∞‡ßá‡¶ï‡ß∞‡ßç‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡ß∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡ß±‡ßá ‡¶Ü‡ß∞‡¶Æ‡ßç‡¶≠ ‡¶π'‡¶¨‡•§", liveLoc: "üì° ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡ßç‡¶¨‡¶®", detecting: "‡¶¨‡¶ø‡¶ö‡¶æ‡ß∞‡¶ø ‡¶•‡¶ï‡¶æ ‡¶π‡ßà‡¶õ‡ßá...", status: "‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø", armed: "‡¶∏‡¶ï‡ßç‡ß∞‡¶ø‡¶Ø‡¶º", gpsSig: "GPS ‡¶õ‡¶ø‡¶ó‡¶®‡ßá‡¶≤", mediaPerm: "‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ ‡¶Ö‡¶®‡ßÅ‡¶Æ‡¶§‡¶ø", tools: "‚öîÔ∏è ‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ ‡¶∏‡¶Å‡¶ú‡ßÅ‡¶≤‡¶ø", btnLoc: "‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡ßç‡¶¨‡¶®", btnLocDesc: "‡¶∂‡ßç‡¶¨‡ßá‡¶Ø‡¶º‡¶æ‡ß∞ ‡¶ï‡ß∞‡¶ï", btnCall: "‡¶≠‡ßÅ‡ß±‡¶æ ‡¶ï‡¶≤", btnCallDesc: "‡¶∏‡ßÅ‡ß∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶™‡¶≤‡¶æ‡¶Ø‡¶º‡¶®", btnRec: "‡¶™‡ßç‡ß∞‡¶Æ‡¶æ‡¶£ ‡ß∞‡ßá‡¶ï‡ß∞‡ßç‡¶°", btnRecDesc: "‡¶Ö‡¶°‡¶ø‡¶Ö'/‡¶≠‡¶ø‡¶°‡¶ø‡¶Ö'", btnHist: "‡¶Ö‡ß±‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏", btnHistDesc: "‡¶ü‡¶æ‡¶á‡¶Æ‡¶≤‡¶æ‡¶á‡¶® ‡¶ö‡¶æ‡¶ì‡¶ï", contacts: "üîå ‡¶ú‡ß∞‡ßÅ‡ß∞‡ßÄ ‡¶∏‡¶Æ‡ßç‡¶™‡ß∞‡ßç‡¶ï", primary: "‡¶™‡ßç‡ß∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶∏‡¶Æ‡ßç‡¶™‡ß∞‡ßç‡¶ï", secondary: "‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º ‡¶∏‡¶Æ‡ßç‡¶™‡ß∞‡ßç‡¶ï", ready: "‡¶ï‡¶≤ ‡¶ï‡ß∞‡¶ï", footer: "üîê ‡¶∏‡ßÅ‡ß∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ | ‚ö° ‡ß∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤-‡¶ü‡¶æ‡¶á‡¶Æ" },
            te: { subtitle: "‚ö° ‡∞≠‡∞¶‡±ç‡∞∞‡∞§‡∞æ ‡∞µ‡±ç‡∞Ø‡∞µ‡∞∏‡±ç‡∞• ‡∞∏‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞Ç", sosTitle: "‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï", sosBtn: "‡∞∏‡∞π‡∞æ‡∞Ø‡∞Ç ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞®‡±ä‡∞ï‡±ç‡∞ï‡∞Ç‡∞°‡∞ø", sosDesc: "SOS ‡∞™‡∞Ç‡∞™‡∞Ç‡∞°‡∞ø. ‡∞∞‡∞π‡∞∏‡±ç‡∞Ø ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∏‡±ç‡∞µ‡∞Ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ï‡∞Ç‡∞ó‡∞æ ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞Æ‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.", liveLoc: "üì° ‡∞≤‡±à‡∞µ‡±ç ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç", detecting: "‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞¨‡∞°‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...", status: "‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø", armed: "‡∞∏‡∞ï‡±ç‡∞∞‡∞ø‡∞Ø‡∞Ç", gpsSig: "GPS ‡∞∏‡∞ø‡∞ó‡±ç‡∞®‡∞≤‡±ç", mediaPerm: "‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ ‡∞Ö‡∞®‡±Å‡∞Æ‡∞§‡±Å‡∞≤‡±Å", tools: "‚öîÔ∏è ‡∞Ö‡∞§‡±ç‡∞Ø‡∞µ‡∞∏‡∞∞ ‡∞∏‡∞æ‡∞ß‡∞®‡∞æ‡∞≤‡±Å", btnLoc: "‡∞≤‡±à‡∞µ‡±ç ‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç", btnLocDesc: "‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", btnCall: "‡∞®‡∞ï‡∞ø‡∞≤‡±Ä ‡∞ï‡∞æ‡∞≤‡±ç", btnCallDesc: "‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§‡∞Ç‡∞ó‡∞æ ‡∞§‡∞™‡±ç‡∞™‡∞ø‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø", btnRec: "‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç ‡∞∞‡∞ø‡∞ï‡∞æ‡∞∞‡±ç‡∞°‡±ç", btnRecDesc: "‡∞Ü‡∞°‡∞ø‡∞Ø‡±ã/‡∞µ‡±Ä‡∞°‡∞ø‡∞Ø‡±ã", btnHist: "‡∞≤‡±ä‡∞ï‡±á‡∞∑‡∞®‡±ç ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞", btnHistDesc: "‡∞ü‡±à‡∞Æ‡±ç‚Äå‡∞≤‡±à‡∞®‡±ç ‡∞ö‡±Ç‡∞°‡∞Ç‡∞°‡∞ø", contacts: "üîå ‡∞™‡∞∞‡∞ø‡∞ö‡∞Ø‡∞æ‡∞≤‡±Å", primary: "‡∞™‡±ç‡∞∞‡∞æ‡∞•‡∞Æ‡∞ø‡∞ï ‡∞™‡∞∞‡∞ø‡∞ö‡∞Ø‡∞Ç", secondary: "‡∞¶‡±ç‡∞µ‡∞ø‡∞§‡±Ä‡∞Ø ‡∞™‡∞∞‡∞ø‡∞ö‡∞Ø‡∞Ç", ready: "‡∞ï‡∞æ‡∞≤‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø", footer: "üîê ‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§‡∞Ç | üõ°Ô∏è ‡∞é‡∞®‡±ç‚Äå‡∞ï‡±ç‡∞∞‡∞ø‡∞™‡±ç‡∞ü‡±ç" },
            ta: { subtitle: "‚ö° ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡ØÅ ‡ÆÖ‡ÆÆ‡Øà‡Æ™‡Øç‡Æ™‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Æ≤‡Æø‡Æ≤‡Øç ‡Æâ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ", sosTitle: "‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æé‡Æö‡Øç‡Æö‡Æ∞‡Æø‡Æï‡Øç‡Æï‡Øà", sosBtn: "‡Æâ‡Æ§‡Æµ‡Æø‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ¥‡ØÅ‡Æ§‡Øç‡Æ§‡Æµ‡ØÅ‡ÆÆ‡Øç", sosDesc: "SOS ‡Æê ‡ÆÖ‡Æ©‡ØÅ‡Æ™‡Øç‡Æ™‡Æµ‡ØÅ‡ÆÆ‡Øç. ‡Æ∞‡Æï‡Æö‡Æø‡ÆØ ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æ§‡Ææ‡Æ©‡Ææ‡Æï‡Æµ‡Øá ‡Æ§‡Øä‡Æü‡Æô‡Øç‡Æï‡ØÅ‡ÆÆ‡Øç.", liveLoc: "üì° ‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ÆÆ‡Øç", detecting: "‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ÆÆ‡Øç ‡Æ§‡Øá‡Æü‡Æ™‡Øç‡Æ™‡Æü‡ØÅ‡Æï‡Æø‡Æ±‡Æ§‡ØÅ...", status: "‡Æ®‡Æø‡Æ≤‡Øà", armed: "‡Æ§‡ÆØ‡Ææ‡Æ∞‡Øç", gpsSig: "‡Æú‡Æø‡Æ™‡Æø‡Æé‡Æ∏‡Øç ‡Æö‡Æø‡Æï‡Øç‡Æ©‡Æ≤‡Øç", mediaPerm: "‡Æä‡Æü‡Æï ‡ÆÖ‡Æ©‡ØÅ‡ÆÆ‡Æ§‡Æø‡Æï‡Æ≥‡Øç", tools: "‚öîÔ∏è ‡ÆÖ‡Æµ‡Æö‡Æ∞ ‡Æï‡Æ∞‡ØÅ‡Æµ‡Æø‡Æï‡Æ≥‡Øç", btnLoc: "‡Æ®‡Øá‡Æ∞‡Æ≤‡Øà ‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü‡ÆÆ‡Øç", btnLocDesc: "‡Æ™‡Æï‡Æø‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç", btnCall: "‡Æ™‡Øã‡Æ≤‡Æø ‡ÆÖ‡Æ¥‡Øà‡Æ™‡Øç‡Æ™‡ØÅ", btnCallDesc: "‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡Ææ‡Æï ‡Æ§‡Æ™‡Øç‡Æ™‡Æø‡Æï‡Øç‡Æï", btnRec: "‡ÆÜ‡Æ§‡Ææ‡Æ∞‡ÆÆ‡Øç ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ", btnRecDesc: "‡ÆÜ‡Æü‡Æø‡ÆØ‡Øã/‡Æµ‡ØÄ‡∞°‡∞ø‡∞Ø‡±ã", btnHist: "‡Æá‡Æ∞‡ØÅ‡Æ™‡Øç‡Æ™‡Æø‡Æü ‡Æµ‡Æ∞‡Æ≤‡Ææ‡Æ±‡ØÅ", btnHistDesc: "‡Æµ‡Æ∞‡Æ≤‡Ææ‡Æ±‡Øç‡Æ±‡Øà‡Æ™‡Øç ‡Æï‡Ææ‡Æ£‡Øç‡Æï", contacts: "üîå ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ‡Æï‡Æ≥‡Øç", primary: "‡ÆÆ‡ØÅ‡Æ§‡Æ©‡Øç‡ÆÆ‡Øà ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ", secondary: "‡Æá‡Æ∞‡Æ£‡Øç‡Æü‡Ææ‡ÆÆ‡Øç ‡Æ®‡Æø‡Æ≤‡Øà ‡Æ§‡Øä‡Æü‡Æ∞‡Øç‡Æ™‡ØÅ", ready: "‡ÆÖ‡Æ¥‡Øà‡Æï‡Øç‡Æï", footer: "üîê ‡Æ™‡Ææ‡Æ§‡ØÅ‡Æï‡Ææ‡Æ™‡Øç‡Æ™‡Ææ‡Æ©‡Æ§‡ØÅ | üõ°Ô∏è ‡Æé‡Æ©‡Øç‡Æï‡Øç‡Æ∞‡Æø‡Æ™‡Øç‡Æü‡Øç" },
            kn: { subtitle: "‚ö° ‡≤≠‡≤¶‡≥ç‡≤∞‡≤§‡≤æ ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü ‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø", sosTitle: "‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü", sosBtn: "‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï‡≥ç‡≤ï‡≤æ‡≤ó‡≤ø ‡≤í‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤ø", sosDesc: "SOS ‡≤ï‡≤≥‡≥Å‡≤π‡≤ø‡≤∏‡≤ø. ‡≤∞‡≤π‡≤∏‡≥ç‡≤Ø ‡≤∞‡≥Ü‡≤ï‡≤æ‡≤∞‡≥ç‡≤°‡≤ø‡≤Ç‡≤ó‡≥ç ‡≤∏‡≥ç‡≤µ‡≤Ø‡≤Ç‡≤ö‡≤æ‡≤≤‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤™‡≥ç‡≤∞‡≤æ‡≤∞‡≤Ç‡≤≠‡≤µ‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.", liveLoc: "üì° ‡≤≤‡≥à‡≤µ‡≥ç ‡≤∏‡≥ç‡≤•‡≤≥", detecting: "‡≤π‡≥Å‡≤°‡≥Å‡≤ï‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥Ü...", status: "‡≤∏‡≥ç‡≤•‡≤ø‡≤§‡≤ø", armed: "‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø", gpsSig: "GPS ‡≤∏‡≤ø‡≤ó‡≥ç‡≤®‡≤≤‡≥ç", mediaPerm: "‡≤Æ‡≤æ‡≤ß‡≥ç‡≤Ø‡≤Æ ‡≤Ö‡≤®‡≥Å‡≤Æ‡≤§‡≤ø‡≤ó‡≤≥‡≥Å", tools: "‚öîÔ∏è ‡≤§‡≥Å‡≤∞‡≥ç‡≤§‡≥Å ‡≤â‡≤™‡≤ï‡≤∞‡≤£‡≤ó‡≤≥‡≥Å", btnLoc: "‡≤≤‡≥à‡≤µ‡≥ç ‡≤∏‡≥ç‡≤•‡≤≥", btnLocDesc: "‡≤π‡≤Ç‡≤ö‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø", btnCall: "‡≤®‡≤ï‡≤≤‡≤ø ‡≤ï‡≤∞‡≥Ü", btnCallDesc: "‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤§‡≤™‡≥ç‡≤™‡≤ø‡≤∏‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø", btnRec: "‡≤∏‡≤æ‡≤ï‡≥ç‡≤∑‡≥ç‡≤Ø ‡≤∞‡≥Ü‡≤ï‡≤æ‡≤∞‡≥ç‡≤°‡≥ç", btnRecDesc: "‡≤Ü‡≤°‡≤ø‡≤Ø‡≥ã/‡≤µ‡≤ø‡≤°‡≤ø‡≤Ø‡≥ã", btnHist: "‡≤∏‡≥ç‡≤•‡≤≥ ‡≤á‡≤§‡≤ø‡≤π‡≤æ‡≤∏", btnHistDesc: "‡≤ü‡≥à‡≤Æ‡≥ç‚Äå‡≤≤‡≥à‡≤®‡≥ç ‡≤®‡≥ã‡≤°‡≤ø", contacts: "üîå ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï‡≤ó‡≤≥‡≥Å", primary: "‡≤™‡≥ç‡≤∞‡≤æ‡≤•‡≤Æ‡≤ø‡≤ï ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï", secondary: "‡≤¶‡≥ç‡≤µ‡≤ø‡≤§‡≥Ä‡≤Ø ‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï", ready: "‡≤ï‡≤∞‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø", footer: "üîê ‡≤∏‡≥Å‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤§ | üõ°Ô∏è ‡≤é‡≤®‡≥ç‚Äå‡≤ï‡≥ç‡≤∞‡≤ø‡≤™‡≥ç‡≤ü‡≥ç" },
            ml: { subtitle: "‚ö° ‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥æ ‡¥∏‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡¥Ç ‡¥∏‡¥ú‡µÄ‡¥µ‡¥Ç", sosTitle: "‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥∞ ‡¥Ö‡¥≤‡µº‡¥ü‡µç‡¥ü‡µç", sosBtn: "‡¥∏‡¥π‡¥æ‡¥Ø‡¥§‡µç‡¥§‡¥ø‡¥®‡¥æ‡¥Ø‡¥ø ‡¥Ö‡¥Æ‡µº‡¥§‡µç‡¥§‡µÅ‡¥ï", sosDesc: "SOS ‡¥Ö‡¥Ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï. ‡¥∞‡¥π‡¥∏‡µç‡¥Ø ‡¥±‡µÜ‡¥ï‡µç‡¥ï‡µã‡µº‡¥°‡¥ø‡¥Ç‡¥ó‡µç ‡¥Ø‡¥æ‡¥®‡µç‡¥§‡µç‡¥∞‡¥ø‡¥ï‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥Ü‡¥∞‡¥Ç‡¥≠‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç.", liveLoc: "üì° ‡¥≤‡µà‡¥µ‡µç ‡¥≤‡µä‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª", detecting: "‡¥§‡¥ø‡¥∞‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ...", status: "‡¥®‡¥ø‡¥≤", armed: "‡¥∏‡¥ú‡µÄ‡¥µ‡¥Ç", gpsSig: "GPS ‡¥∏‡¥ø‡¥ó‡µç‡¥®‡µΩ", mediaPerm: "‡¥Æ‡µÄ‡¥°‡¥ø‡¥Ø ‡¥Ö‡¥®‡µÅ‡¥Æ‡¥§‡¥ø‡¥ï‡µæ", tools: "‚öîÔ∏è ‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥∞ ‡¥ü‡µÇ‡¥≥‡µÅ‡¥ï‡µæ", btnLoc: "‡¥≤‡µà‡¥µ‡µç ‡¥≤‡µä‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª", btnLocDesc: "‡¥™‡¥ô‡µç‡¥ï‡¥ø‡¥ü‡µÅ‡¥ï", btnCall: "‡¥µ‡µç‡¥Ø‡¥æ‡¥ú ‡¥ï‡µã‡µæ", btnCallDesc: "‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥§‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥∞‡¥ï‡µç‡¥∑‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥ï", btnRec: "‡¥§‡µÜ‡¥≥‡¥ø‡¥µ‡µç ‡¥±‡µÜ‡¥ï‡µç‡¥ï‡µã‡µº‡¥°‡µç", btnRecDesc: "‡¥ì‡¥°‡¥ø‡¥Ø‡µã/‡¥µ‡µÄ‡¥°‡¥ø‡¥Ø‡µã", btnHist: "‡¥≤‡µä‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª ‡¥ö‡¥∞‡¥ø‡¥§‡µç‡¥∞‡¥Ç", btnHistDesc: "‡¥ü‡µà‡¥Ç‡¥≤‡µà‡µª ‡¥ï‡¥æ‡¥£‡µÅ‡¥ï", contacts: "üîå ‡¥ï‡µã‡µ∫‡¥ü‡¥æ‡¥ï‡µç‡¥±‡µç‡¥±‡µÅ‡¥ï‡µæ", primary: "‡¥™‡µç‡¥∞‡¥æ‡¥•‡¥Æ‡¥ø‡¥ï ‡¥ï‡µã‡µ∫‡¥ü‡¥æ‡¥ï‡µç‡¥±‡µç‡¥±‡µç", secondary: "‡¥¶‡µç‡¥µ‡¥ø‡¥§‡µÄ‡¥Ø ‡¥ï‡µã‡µ∫‡¥ü‡¥æ‡¥ï‡µç‡¥±‡µç‡¥±‡µç", ready: "‡¥µ‡¥ø‡¥≥‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª", footer: "üîê ‡¥∏‡µÅ‡¥∞‡¥ï‡µç‡¥∑‡¥ø‡¥§‡¥Ç | üõ°Ô∏è ‡¥é‡µª‡¥ï‡µç‡¥∞‡¥ø‡¥™‡µç‡¥±‡µç‡¥±‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡¥§‡µç" }
        };

        const stateLangMap = {
            "rajasthan": "rj", "punjab": "pa", "karnataka": "kn", "kerala": "ml", "odisha": "or", "assam": "as",
            "maharashtra": "mr", "gujarat": "gu", "tamil nadu": "ta", "west bengal": "bn",
            "telangana": "te", "andhra pradesh": "te", "uttar pradesh": "hi", "madhya pradesh": "hi",
            "bihar": "hi", "haryana": "hi", "delhi": "hi", "jharkhand": "hi",
            "chhattisgarh": "hi", "uttarakhand": "hi", "himachal pradesh": "hi"
        };

        // --- APP STATE ---
        let state = {
            currentLocation: { lat: null, lng: null, address: 'Detecting...' },
            history: JSON.parse(localStorage.getItem('naruksha_history') || '[]'),
            mediaStream: null,
            mediaRecorder: null,
            recordedChunks: [],
            timers: { recording: null, call: null },
            seconds: { recording: 0, call: 0 }
        };

        let currentLang = localStorage.getItem('user_pref_lang') || 'en';
        let userForcedLang = !!localStorage.getItem('user_pref_lang');

        function applyTranslations() {
            const t = i18n[currentLang] || i18n['en'];
            document.getElementById('lang-selector').value = currentLang;

            document.getElementById('app-subtitle').innerText = t.subtitle;
            document.getElementById('sos-title').innerText = t.sosTitle;
            document.getElementById('sos-text').innerText = t.sosBtn;
            document.getElementById('sos-desc').innerText = t.sosDesc;
            document.getElementById('live-loc-title').innerText = t.liveLoc;
            if (state.currentLocation.address === 'Fetching location...' || state.currentLocation.address === 'Detecting location...') {
                document.getElementById('current-address').innerText = t.detecting;
            }
            document.getElementById('status-label').innerText = t.status;
            document.getElementById('status-val').innerText = t.armed;
            document.getElementById('gps-label').innerText = t.gpsSig;
            document.getElementById('media-label').innerText = t.mediaPerm;
            document.getElementById('tools-title').innerText = t.tools;
            document.getElementById('btn-loc-title').innerText = t.btnLoc;
            document.getElementById('btn-loc-desc').innerText = t.btnLocDesc;
            document.getElementById('btn-call-title').innerText = t.btnCall;
            document.getElementById('btn-call-desc').innerText = t.btnCallDesc;
            document.getElementById('btn-rec-title').innerText = t.btnRec;
            document.getElementById('btn-rec-desc').innerText = t.btnRecDesc;
            document.getElementById('btn-hist-title').innerText = t.btnHist;
            document.getElementById('btn-hist-desc').innerText = t.btnHistDesc;
            document.getElementById('contacts-title').innerText = t.contacts;
            document.getElementById('contact-1-label').innerText = t.primary;
            document.getElementById('contact-2-label').innerText = t.secondary;
            document.getElementById('c1-ready').innerText = t.ready;
            document.getElementById('c2-ready').innerText = t.ready;
            document.getElementById('footer-txt').innerText = t.footer;
        }

        document.getElementById('lang-selector').addEventListener('change', (e) => {
            currentLang = e.target.value;
            userForcedLang = true;
            localStorage.setItem('user_pref_lang', currentLang);
            applyTranslations();
        });

        // --- SYNTHETIC SIREN ---
        let audioCtx = null;
        let sirenOsc = null;
        let sirenGain = null;
        let sirenInterval = null;

        function startSiren() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            if (audioCtx.state === 'suspended') audioCtx.resume();

            sirenOsc = audioCtx.createOscillator();
            sirenGain = audioCtx.createGain();

            sirenOsc.connect(sirenGain);
            sirenGain.connect(audioCtx.destination);

            sirenOsc.type = 'square';
            sirenGain.gain.value = 0.5;
            sirenOsc.start();

            let high = true;
            sirenInterval = setInterval(() => {
                sirenOsc.frequency.setValueAtTime(high ? 800 : 1200, audioCtx.currentTime);
                high = !high;
            }, 400);
        }

        function stopSiren() {
            if (sirenInterval) clearInterval(sirenInterval);
            if (sirenOsc) {
                sirenOsc.stop();
                sirenOsc.disconnect();
                sirenGain.disconnect();
                sirenOsc = null;
            }
        }

        // --- FAKE CALL VOICE ---
        function playFakeCallVoice() {
            if ('speechSynthesis' in window) {
                const msg = new SpeechSynthesisUtterance("Hey, I'm just 2 minutes away. I can see you now. Stay right there, I'm pulling up.");
                msg.pitch = 1;
                msg.rate = 0.9;
                msg.volume = 1;
                setTimeout(() => window.speechSynthesis.speak(msg), 1000);
            }
        }

        // --- 1. SYSTEM INITIALIZATION ---
        async function initSystem() {
            applyTranslations();

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                stream.getTracks().forEach(track => track.stop());
                document.getElementById('media-status').textContent = "‚úì GRANTED";
                document.getElementById('media-status').className = "text-green-400 font-mono";
            } catch (err) {
                document.getElementById('media-status').textContent = "DENIED";
            }

            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(async (pos) => {
                    state.currentLocation.lat = pos.coords.latitude;
                    state.currentLocation.lng = pos.coords.longitude;

                    document.getElementById('lat-display').textContent = `Lat: ${pos.coords.latitude.toFixed(5)}`;
                    document.getElementById('lng-display').textContent = `Lng: ${pos.coords.longitude.toFixed(5)}`;
                    document.getElementById('gps-status-text').textContent = "‚úì ACTIVE";
                    document.getElementById('gps-status-text').className = "text-green-400 font-mono";
                    document.getElementById('loc-status-text').textContent = "GPS ONLINE";
                    document.getElementById('location-status').querySelector('span').classList.replace('bg-yellow-400', 'bg-green-400');
                    document.getElementById('loc-status-text').classList.replace('text-yellow-400', 'text-green-400');

                    if (state.currentLocation.address === 'Fetching location...' || state.currentLocation.address === 'Detecting...') {
                        try {
                           const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`, { headers: { 'User-Agent': 'Naruksha-Safety-App' } });
                            const data = await res.json();
                            if (data.display_name) {
                                state.currentLocation.address = data.display_name;
                                document.getElementById('current-address').textContent = data.display_name.substring(0, 80) + "...";

                                if (!userForcedLang && data.address && data.address.state) {
                                    const foundState = data.address.state.toLowerCase();
                                    for (let key in stateLangMap) {
                                        if (foundState.includes(key)) {
                                            currentLang = stateLangMap[key];
                                            break;
                                        }
                                    }
                                    if (!stateLangMap[foundState] && data.address.country_code === 'in') {
                                        currentLang = 'hi';
                                    }
                                    applyTranslations();
                                }
                            }
                        } catch (e) { console.log("Address fetch busy"); }
                    }
                }, () => {
                    document.getElementById('current-address').textContent = 'Location blocked.';
                    document.getElementById('gps-status-text').textContent = "DENIED";
                    document.getElementById('gps-status-text').className = "text-red-400 font-mono";
                }, { enableHighAccuracy: true });
            } else {
                document.getElementById('current-address').textContent = 'Geolocation not supported.';
            }
        }

        window.addEventListener('load', () => {
            initSystem();
            updateHistoryUI();
        });

        // --- 2. DATA PERSISTENCE & HISTORY ---
        async function saveLocationToHistory(type = 'manual') {
            if (!state.currentLocation.lat) return;
            const entry = {
                id: Date.now(),
                type: 'location',
                timestamp: new Date().toISOString(),
                latitude: state.currentLocation.lat,
                longitude: state.currentLocation.lng,
                address: state.currentLocation.address,
                status: type
            };

            state.history.unshift(entry);
            if (state.history.length > 50) state.history.pop();
            localStorage.setItem('naruksha_history', JSON.stringify(state.history));
            updateHistoryUI();
        }

        function updateHistoryUI() {
            const list = document.getElementById('history-list');
            if (state.history.length === 0) {
                list.innerHTML = '<p class="text-gray-400 text-sm text-center py-8">No location history yet</p>';
                return;
            }
            list.innerHTML = state.history.map((item) => {
                const date = new Date(item.timestamp);
                const color = item.status === 'sos' ? 'text-red-400' : 'text-cyan-400';

                // FIXED GOOGLE MAPS LINK FOR HISTORY
                const mapLink = `http://googleusercontent.com/maps.google.com/?q=${item.latitude},${item.longitude}`;

                return `
                <div class="bg-white/5 rounded-xl p-4 border border-gray-700/50">
                    <div class="flex items-start justify-between mb-2">
                        <span class="px-2 py-1 rounded-full text-xs font-mono bg-white/5 ${color}">${item.status.toUpperCase()}</span>
                        <span class="text-xs text-gray-500 font-mono">${date.toLocaleTimeString()}</span>
                    </div>
                    <p class="text-sm text-white mb-2 font-mono">${item.address.substring(0, 80)}...</p>
                    <a href="${mapLink}" target="_blank" class="inline-block text-xs text-cyan-400 hover:text-cyan-300 font-mono">View on Map ‚Üí</a>
                </div>`;
            }).join('');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 4000);
        }

        // --- 3. RECORDING ENGINE ---
        function startLocalRecordingUI(stream, type = 'video') {
            state.recordedChunks = [];
            state.mediaRecorder = new MediaRecorder(stream);
            state.mediaRecorder.ondataavailable = (e) => { if (e.data.size > 0) state.recordedChunks.push(e.data); };

            state.mediaRecorder.onstop = () => {
                const blob = new Blob(state.recordedChunks, { type: type === 'video' ? 'video/webm' : 'audio/webm' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = `NARUKSHA_EVIDENCE_${Date.now()}.webm`;
                a.click(); 
                saveLocationToHistory('recording');
                showToast(`‚úÖ EVIDENCE SAVED TO DEVICE!`);
            };

            state.mediaRecorder.start();
            state.seconds.recording = 0;

            // This sets up the UI inside the existing manual modal to reflect background recording
            document.getElementById('recording-status').classList.remove('hidden');
            document.getElementById('start-audio-record').classList.add('hidden');
            document.getElementById('start-video-record').classList.add('hidden');
            if (type === 'video') document.getElementById('video-preview').classList.remove('hidden');

            const stopBtn = document.getElementById('stop-record');
            stopBtn.classList.remove('hidden');
            stopBtn.classList.add('flex');

            state.timers.recording = setInterval(() => {
                state.seconds.recording++;
                const m = Math.floor(state.seconds.recording / 60).toString().padStart(2, '0');
                const s = (state.seconds.recording % 60).toString().padStart(2, '0');
                document.getElementById('recording-timer').textContent = `${m}:${s}`;
            }, 1000);
        }

        document.getElementById('stop-record').addEventListener('click', () => {
            if (state.mediaRecorder && state.mediaRecorder.state !== 'inactive') state.mediaRecorder.stop();
            if (state.mediaStream) state.mediaStream.getTracks().forEach(track => track.stop());
            clearInterval(state.timers.recording);
            stopSiren();

            document.getElementById('recording-status').classList.add('hidden');
            document.getElementById('video-preview').classList.add('hidden');
            document.getElementById('start-audio-record').classList.remove('hidden');
            document.getElementById('start-video-record').classList.remove('hidden');

            const stopBtn = document.getElementById('stop-record');
            stopBtn.classList.add('hidden');
            stopBtn.classList.remove('flex');
            document.getElementById('record-modal').classList.add('hidden');
        });

        // Manual Record Button Triggers
        document.getElementById('record-btn').addEventListener('click', () => { 
            document.getElementById('record-modal').classList.remove('hidden'); 
        });
        
        document.getElementById('close-record-modal').addEventListener('click', () => { 
            // Only close if not actively recording. If recording, they must hit stop.
            if(state.mediaRecorder && state.mediaRecorder.state === 'recording') {
                showToast("Stop recording to close.");
            } else {
                document.getElementById('record-modal').classList.add('hidden'); 
            }
        });

        document.getElementById('start-audio-record').addEventListener('click', async () => {
            try {
                state.mediaStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                startLocalRecordingUI(state.mediaStream, 'audio');
            } catch (error) { showToast('Microphone access denied!'); }
        });

        document.getElementById('start-video-record').addEventListener('click', async () => {
            try {
                state.mediaStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('preview-video').srcObject = state.mediaStream;
                startLocalRecordingUI(state.mediaStream, 'video');
            } catch (error) { showToast('Camera access denied!'); }
        });


        // --- 4. EMERGENCY SOS (SECRET AUTO RECORD) ---
        document.getElementById('sos-btn').addEventListener('click', async () => {
            if (navigator.vibrate) navigator.vibrate([500, 200, 500, 200, 500]);

            startSiren();
            saveLocationToHistory('sos');
            showToast("üÜò SOS DISPATCHED! Camera activated secretly.");

            const lat = state.currentLocation.lat;
            const lng = state.currentLocation.lng;

            if (lat && lng) {
                const mapsLink = `http://googleusercontent.com/maps.google.com/?q=${lat},${lng}`;
                const phone1 = localStorage.getItem('local_phone_1') || '';
                const message = encodeURIComponent(`üÜò EMERGENCY! I need help. My live location: ${mapsLink}`);

                if (window.db) {
                    try {
                        await window.fbAddDoc(window.fbCollection(window.db, "sos_pulses"), {
                            deviceId, lat, lng, time: Date.now(), address: state.currentLocation.address
                        });
                    } catch (e) { }
                }

                if (phone1) window.location.href = `sms:${phone1}?body=${message}`;
            } else {
                showToast("Waiting for GPS to send location...");
            }

            // 3. Secret Recording Start (Hidden UI)
            if (!state.mediaRecorder || state.mediaRecorder.state === 'inactive') {
                try {
                    state.mediaStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                    document.getElementById('preview-video').srcObject = state.mediaStream;
                    startLocalRecordingUI(state.mediaStream, 'video'); 
                    // Note: We deliberately do NOT remove 'hidden' from 'record-modal' here, 
                    // keeping the recording invisible until the user manually clicks the üé• button!
                } catch (error) { 
                    console.error("Camera blocked"); 
                }
            }
        });


        // --- 5. ACTION BUTTONS ---
        document.getElementById('location-btn').addEventListener('click', () => {
            saveLocationToHistory('manual');
            showToast('üìç LIVE LOCATION SAVED!');
        });

        document.getElementById('history-btn').addEventListener('click', () => document.getElementById('history-modal').classList.remove('hidden'));
        document.getElementById('close-history-modal').addEventListener('click', () => document.getElementById('history-modal').classList.add('hidden'));
        document.getElementById('clear-history').addEventListener('click', () => {
            state.history = [];
            localStorage.removeItem('naruksha_history');
            updateHistoryUI();
        });

        document.getElementById('fakecall-btn').addEventListener('click', () => document.getElementById('fakecall-modal').classList.remove('hidden'));
        document.getElementById('close-fakecall-modal').addEventListener('click', () => document.getElementById('fakecall-modal').classList.add('hidden'));

        function startFakeCall(name, emoji) {
            document.getElementById('fakecall-modal').classList.add('hidden');
            document.getElementById('call-screen').classList.remove('hidden');
            document.getElementById('caller-name-display').textContent = name;
            document.getElementById('caller-avatar').textContent = emoji;
            state.seconds.call = 0;
            document.getElementById('call-status-txt').textContent = "Calling...";
            document.getElementById('call-timer').textContent = "00:00";
        }

        document.getElementById('call-papa').addEventListener('click', () => startFakeCall(document.getElementById('caller-papa-name').innerText, 'üë®'));
        document.getElementById('call-mummy').addEventListener('click', () => startFakeCall(document.getElementById('caller-mummy-name').innerText, 'üë©'));

        document.getElementById('accept-call').addEventListener('click', () => {
            document.getElementById('call-status-txt').innerHTML = `<span class="text-green-400">Connected</span>`;
            playFakeCallVoice(); // Trigger Phase 2 Audio

            state.timers.call = setInterval(() => {
                state.seconds.call++;
                const m = Math.floor(state.seconds.call / 60).toString().padStart(2, '0');
                const s = (state.seconds.call % 60).toString().padStart(2, '0');
                document.getElementById('call-timer').textContent = `${m}:${s}`;
            }, 1000);
        });

        document.getElementById('decline-call').addEventListener('click', () => {
            document.getElementById('call-screen').classList.add('hidden');
            clearInterval(state.timers.call);
            stopSiren();
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
        });

        // --- CLICK TO CALL CONFIGURATION ---
        function updateContactLinks(p1, p2) {
            document.getElementById('contact-1-card').onclick = () => {
                if(p1) window.location.href = `tel:${p1}`;
                else showToast('Phone number not set! Click ‚öôÔ∏è to add.');
            };
            document.getElementById('contact-2-card').onclick = () => {
                if(p2) window.location.href = `tel:${p2}`;
                else showToast('Phone number not set! Click ‚öôÔ∏è to add.');
            };
        }

        // === CLOUD SETTINGS & SYNC LOGIC ===
        document.getElementById('cloud-settings-btn').addEventListener('click', () => {
            document.getElementById('cloud-settings-modal').classList.remove('hidden');
        });

        window.forceSave = async function () {
            document.getElementById('cloud-settings-modal').classList.add('hidden');

            const n1 = document.getElementById('cloud-n1').value || 'Papa';
            const n2 = document.getElementById('cloud-n2').value || 'Mummy';
            const p1 = document.getElementById('cloud-p1').value || '';
            const p2 = document.getElementById('cloud-p2').value || '';

            localStorage.setItem('local_contact_1', n1);
            localStorage.setItem('local_contact_2', n2);
            localStorage.setItem('local_phone_1', p1);
            localStorage.setItem('local_phone_2', p2);

            document.getElementById('contact-1-name').innerText = n1;
            document.getElementById('contact-2-name').innerText = n2;
            document.getElementById('caller-papa-name').innerText = n1;
            document.getElementById('caller-mummy-name').innerText = n2;

            updateContactLinks(p1, p2); // Bind click-to-call

            showToast("Saved! Syncing to Cloud...");

            if (window.db) {
                try {
                    await window.fbSetDoc(window.fbDoc(window.db, "settings", deviceId), {
                        n1: n1,
                        n2: n2,
                        p1: p1,
                        p2: p2,
                        updatedAt: Date.now()
                    });
                    showToast("Cloud Sync Complete! ‚òÅÔ∏è");
                } catch (e) {
                    console.log("Cloud blocked. Names saved locally.");
                }
            }
        };

        window.addEventListener('DOMContentLoaded', () => {
            const s1 = localStorage.getItem('local_contact_1') || 'Papa';
            const s2 = localStorage.getItem('local_contact_2') || 'Mummy';
            const p1 = localStorage.getItem('local_phone_1') || '';
            const p2 = localStorage.getItem('local_phone_2') || '';

            document.getElementById('contact-1-name').innerText = s1;
            document.getElementById('contact-2-name').innerText = s2;
            document.getElementById('caller-papa-name').innerText = s1;
            document.getElementById('caller-mummy-name').innerText = s2;

            if (s1 !== 'Papa') document.getElementById('cloud-n1').value = s1;
            if (s2 !== 'Mummy') document.getElementById('cloud-n2').value = s2;
            if (p1) document.getElementById('cloud-p1').value = p1;
            if (p2) document.getElementById('cloud-p2').value = p2;

            updateContactLinks(p1, p2); // Bind click-to-call on load
        });

        const fbSyncLoop = setInterval(() => {
            if (window.db) {
                clearInterval(fbSyncLoop);
                syncDataFromCloud();
            }
        }, 1000);

        async function syncDataFromCloud() {
            try {
                const snap = await window.fbGetDoc(window.fbDoc(window.db, "settings", deviceId));
                if (snap.exists()) {
                    const d = snap.data();
                    const n1 = d.n1 || 'Papa';
                    const n2 = d.n2 || 'Mummy';
                    const p1 = d.p1 || '';
                    const p2 = d.p2 || '';

                    localStorage.setItem('local_contact_1', n1);
                    localStorage.setItem('local_contact_2', n2);
                    localStorage.setItem('local_phone_1', p1);
                    localStorage.setItem('local_phone_2', p2);

                    document.getElementById('contact-1-name').innerText = n1;
                    document.getElementById('contact-2-name').innerText = n2;
                    document.getElementById('caller-papa-name').innerText = n1;
                    document.getElementById('caller-mummy-name').innerText = n2;

                    document.getElementById('cloud-n1').value = n1 !== 'Papa' ? n1 : '';
                    document.getElementById('cloud-n2').value = n2 !== 'Mummy' ? n2 : '';
                    document.getElementById('cloud-p1').value = p1;
                    document.getElementById('cloud-p2').value = p2;

                    updateContactLinks(p1, p2); 
                }
            } catch (e) { console.log("Cloud fetch error"); }
        }

        // --- PWA INSTALLATION LOGIC ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(err => console.log('SW Failed', err));
            });
        }

        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');

        const isIos = () => /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());
        const isStandalone = () => window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

        if (isIos() && !isStandalone()) {
            installBtn.classList.remove('hidden');
            installBtn.addEventListener('click', () => {
                showToast('üçé iOS: Tap the Share icon at bottom, then "Add to Home Screen"');
            });
        }

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            if (!isStandalone()) installBtn.classList.remove('hidden');

            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        installBtn.classList.add('hidden');
                        showToast('App installed successfully! üéâ');
                    }
                    deferredPrompt = null;
                }
            });
        });

        window.addEventListener('appinstalled', () => {
            installBtn.classList.add('hidden');
            deferredPrompt = null;
        });
    </script>
</body>

</html>


